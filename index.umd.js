(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.index={},d.Vue))})(this,function(d,e){"use strict";const y=["href"],$={class:"avatar"},D=["src"],E={class:"username"},w=e.defineComponent({__name:"UserBadge",props:{username:{}},setup(t){return(o,n)=>(e.openBlock(),e.createElementBlock("a",{href:`https://github.com/${o.username}`,rel:"noopener noreferrer",target:"_blank",class:"user"},[e.createElementVNode("span",$,[e.createElementVNode("img",{src:`https://github.com/${o.username}.png`,alt:""},null,8,D)]),e.createElementVNode("span",E,e.toDisplayString(o.username),1)],8,y))}}),u=(t,o)=>{const n=t.__vccOpts||t;for(const[s,r]of o)n[s]=r;return n},B=u(w,[["__scopeId","data-v-2982cceb"]]),N={class:"issue-tabs"},V=["onClick"],T={key:0},S={key:0},I=["innerHTML"],C={key:1},z=["href"],L={key:2},R=["href"],j=u(e.defineComponent({__name:"TimelineItemIssues",props:{release:{},options:{}},setup(t){const o=t,n=e.ref(""),s=[{name:"desc",title:"Desc",show:o.options.display.release.desc},{name:"pulls",title:"Pull Requests",show:o.options.display.release.pulls},{name:"commits",title:"Commits",show:o.options.display.release.commits}];o.options.display.release.defaultOpenTab&&(n.value=o.options.display.release.defaultOpenTab);function r(a){n.value=a===n.value?"":a}return(a,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",N,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(s,l=>e.createElementVNode("button",{key:l.name,class:e.normalizeClass(["tab",{active:n.value===l.name}]),onClick:b=>r(l.name)},[l.show?(e.openBlock(),e.createElementBlock("span",T,e.toDisplayString(l.title),1)):e.createCommentVNode("",!0)],10,V)),64))]),e.createElementVNode("div",{class:e.normalizeClass(["issues",[{open:n.value!==""},n.value]])},[n.value==="desc"&&a.release.desc?(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("div",{class:"issue",innerHTML:a.release.desc},null,8,I)])):e.createCommentVNode("",!0),n.value==="pulls"?(e.openBlock(),e.createElementBlock("div",C,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.release.pulls,l=>(e.openBlock(),e.createElementBlock("div",{key:l.number,class:"issue-wrapper"},[e.createElementVNode("a",{href:`https://github.com/${a.options.github.owner}/${a.options.github.repo}/pull/${l.number}`,rel:"noopener noreferrer",target:"_blank",class:"issue"},[e.createElementVNode("p",null,"#"+e.toDisplayString(l.number)+" "+e.toDisplayString(l.title)+" - @"+e.toDisplayString(l.author),1)],8,z)]))),128))])):e.createCommentVNode("",!0),n.value==="commits"?(e.openBlock(),e.createElementBlock("div",L,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.release.commits,l=>(e.openBlock(),e.createElementBlock("div",{key:l.url,class:"issue-wrapper"},[e.createElementVNode("a",{href:l.url,rel:"noopener noreferrer",target:"_blank",class:"issue"},[e.createElementVNode("p",null,e.toDisplayString(l.title)+" - @"+e.toDisplayString(l.author),1)],8,R)]))),128))])):e.createCommentVNode("",!0)],2)],64))}}),[["__scopeId","data-v-37a279f4"]]),f=t=>(e.pushScopeId("data-v-b0bc72c4"),t=t(),e.popScopeId(),t),F={class:"timeline-item"},M=f(()=>e.createElementVNode("div",{class:"circle"},null,-1)),O={class:"content"},H=["datetime"],q=["href"],A={key:0,class:"release-name"},U=f(()=>e.createElementVNode("ul",{class:"notes"},[e.createElementVNode("li",{class:"note"})],-1)),P=u(e.defineComponent({__name:"TimelineItem",props:{release:{},options:{}},setup(t){function o(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}return(n,s)=>(e.openBlock(),e.createElementBlock("div",F,[M,e.createElementVNode("div",O,[e.createElementVNode("time",{datetime:n.release.published_at},e.toDisplayString(o(n.release.published_at)),9,H),e.createElementVNode("a",{href:`https://github.com/${n.options.github.owner}/${n.options.github.repo}/releases/tag/${n.release.tag_name}`,rel:"noopener noreferrer",target:"_blank",class:"tag-name"},e.toDisplayString(n.release.tag_name),9,q),n.options.display.releaseName?(e.openBlock(),e.createElementBlock("h2",A,e.toDisplayString(n.release.name),1)):e.createCommentVNode("",!0),e.createVNode(B,{username:n.release.author},null,8,["username"]),e.createVNode(j,{release:n.release,options:n.options},null,8,["release","options"]),U])]))}}),[["__scopeId","data-v-b0bc72c4"]]);function Y(t,o){return t.getDate()===o.getDate()&&t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear()}function G(t,o){const n=[],s=new Date(t);for(s.setHours(0,0);s<=o;)n.push(new Date(s)),s.setDate(s.getDate()+1);return n}async function J(t){let o={};const n=new Map;for(const i in["releases","pulls","commits"]){const c=["releases","pulls","commits"][i];let p;t.github[c].feedType==="github"?(p=`https://api.github.com/repos/${t.github.owner}/${t.github.repo}/${c}?per_page=${t.github.size}`,t.github.token&&(o={Authorization:`token ${t.github.token}`})):p=t.github[c].url;const g=await fetch(p,{headers:o}).then(_=>_.json());n.set(c,g)}const s=n.get("releases"),r=n.get("pulls"),a=n.get("commits"),m=s[s.length-1],l=G(new Date(m.published_at),new Date),b=new Date(s[0].published_at).getTime()-new Date(s[s.length-1].published_at).getTime(),k=l.reverse().map(i=>({day:i,release:s.find(c=>Y(new Date(c.published_at),i))})).filter(i=>i.release).map((i,c)=>{const p=new Date(i.release.published_at),g=c===s.length-1?new Date(1980,1):new Date(s[c+1].published_at),_=c===0?null:new Date(s[c-1].published_at),ie=c===0?t.timeline.paddingTop:c<s.length-1?(_.getTime()-p.getTime())/b:0;return{day:i.day,release:{name:i.release.name,tag_name:i.release.tag_name,published_at:i.release.published_at,author:i.release.author.login,desc:K(i.release.body),pulls:Q(g,p,r),commits:W(g,p,a)},diff:ie}});return console.log(k),k}function K(t){if(!t)return"";t=t.replaceAll("</samp>","").replaceAll("<samp>","");const o=/\[([^\]]+)\]\(([^)]+)\)/g;t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(o,'<a href="$2" target="_blank">$1</a>');const n=/^(#+)\s(.+)/gm;return t=t.replace(n,(s,r,a)=>{const m=r.length;return`<h${m}>${a}</h${m}>`}),t=`<p>${t}`,t=t.split(`\r
`).filter(s=>s).map(s=>s.trim()).join("</p><p>"),t+="</p>",t}function Q(t,o,n){return n.filter(s=>{const r=new Date(s.closed_at);return r>=t&&r<=o}).map(s=>({title:s.title,number:s.number,author:s.user.login}))}function W(t,o,n){return n.filter(s=>{const r=new Date(s.commit.author.date);return r>=t&&r<=o}).map(s=>({title:s.commit.message,url:s.commit.url,author:s.author.login}))}const h=t=>(e.pushScopeId("data-v-1257209b"),t=t(),e.popScopeId(),t),X={class:"release-timeline dark1"},Z=h(()=>e.createElementVNode("div",{id:"stars"},null,-1)),x=h(()=>e.createElementVNode("div",{id:"stars2"},null,-1)),v=h(()=>e.createElementVNode("div",{id:"stars3"},null,-1)),ee={class:"header"},te=h(()=>e.createElementVNode("h1",null,"Releases",-1)),se=["href"],ne=[e.createStaticVNode('<div class="github-link" data-v-1257209b><div class="github-icon" aria-hidden="true" data-v-1257209b><svg width="24" height="24" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" data-v-1257209b><path fill="currentColor" d="M16 .396c-8.839 0-16 7.167-16 16c0 7.073 4.584 13.068 10.937 15.183c.803.151 1.093-.344 1.093-.772c0-.38-.009-1.385-.015-2.719c-4.453.964-5.391-2.151-5.391-2.151c-.729-1.844-1.781-2.339-1.781-2.339c-1.448-.989.115-.968.115-.968c1.604.109 2.448 1.645 2.448 1.645c1.427 2.448 3.744 1.74 4.661 1.328c.14-1.031.557-1.74 1.011-2.135c-3.552-.401-7.287-1.776-7.287-7.907c0-1.751.62-3.177 1.645-4.297c-.177-.401-.719-2.031.141-4.235c0 0 1.339-.427 4.4 1.641a15.436 15.436 0 0 1 4-.541c1.36.009 2.719.187 4 .541c3.043-2.068 4.381-1.641 4.381-1.641c.859 2.204.317 3.833.161 4.235c1.015 1.12 1.635 2.547 1.635 4.297c0 6.145-3.74 7.5-7.296 7.891c.556.479 1.077 1.464 1.077 2.959c0 2.14-.02 3.864-.02 4.385c0 .416.28.916 1.104.755c6.4-2.093 10.979-8.093 10.979-15.156c0-8.833-7.161-16-16-16z" data-v-1257209b></path></svg></div><div class="github-title" data-v-1257209b>View on GitHub</div></div>',1)],oe={class:"timeline"},ae=h(()=>e.createElementVNode("div",{class:"line"},null,-1)),le=u(e.defineComponent({__name:"ReleaseTimeline",props:{options:{}},setup(t){const o=t,n=e.ref();return e.onMounted(async()=>{n.value=await J(o.options);const s=new IntersectionObserver(r=>{r.forEach(a=>{a.isIntersecting&&(a.target.style.opacity="1")})},{threshold:.5});e.nextTick(()=>{document.querySelectorAll(".timeline .rt-tr-el").forEach(a=>{s.observe(a)})})}),(s,r)=>(e.openBlock(),e.createElementBlock("section",X,[Z,x,v,e.createElementVNode("header",ee,[te,e.createElementVNode("a",{href:`https://github.com/${s.options.github.owner}/${s.options.github.repo}/releases`,rel:"noopener noreferrer",target:"_blank"},ne,8,se)]),e.createElementVNode("div",oe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(a,m)=>(e.openBlock(),e.createElementBlock("section",{key:a.day.getUTCDate(),class:"timeline-record rt-tr-el",style:e.normalizeStyle({paddingTop:`${a.diff*s.options.timeline.span}px`})},[ae,e.createVNode(P,{release:a.release,options:s.options,class:e.normalizeClass(m%2===1?"left":"right")},null,8,["release","options","class"])],4))),128))])]))}}),[["__scopeId","data-v-1257209b"]]),re={github:{owner:"vuejs",repo:"vitepress",token:"",releases:{feedType:"github",url:"/releases.json",size:20},pulls:{feedType:"github",url:"pulls.json",size:20},commits:{feedType:"github",url:"commits.json",size:30}},timeline:{paddingTop:.1,span:200},display:{releaseName:!0,animatedBackground:!0,animatedBackgroundForLightTheme:!1,release:{desc:!0,pulls:!0,commits:!0}}};d.DefaultOptions=re,d.ReleaseTimeline=le,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
